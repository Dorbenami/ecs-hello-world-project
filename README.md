# üöÄ Hello World on AWS Fargate - Fullstack Project (Terraform + GitHub Actions)

This project showcases an end-to-end deployment of a simple "Hello World" web app to AWS using ECS Fargate. It includes:

* **Infrastructure provisioning** via Terraform
* **Dockerized application** hosted on Amazon ECR
* **CI/CD automation** with GitHub Actions that rebuilds and deploys on every push to `main`

---

## üì¶ Project Structure

```bash
ecs-hello-world-monorepo/
‚îÇ
‚îú‚îÄ‚îÄ infra/                          # Terraform configuration
‚îÇ   ‚îú‚îÄ‚îÄ main.tf
‚îÇ   ‚îú‚îÄ‚îÄ variables.tf
‚îÇ   ‚îú‚îÄ‚îÄ outputs.tf
‚îÇ   ‚îî‚îÄ‚îÄ modules/                    # VPC, ECS, etc.
‚îÇ
‚îú‚îÄ‚îÄ hello-world-app/               # Application code and CI/CD
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ task-definition.json       # ECS Task Definition (used by GitHub Actions)
‚îÇ   ‚îî‚îÄ‚îÄ .github/
‚îÇ       ‚îî‚îÄ‚îÄ workflows/
‚îÇ           ‚îî‚îÄ‚îÄ main.yml           # GitHub Actions workflow
‚îÇ
‚îî‚îÄ‚îÄ README.md                      # You're here üöÄ
```

> üí° **Note**: In production, this monorepo would typically be split into two separate GitHub repositories:
>
> * `ecs-hello-world-infra` for Terraform code
> * `ecs-hello-world-app` for the app code and CI/CD workflow

---

## üéØ What This Project Does

* Builds a custom VPC with public/private subnets
* Creates an Application Load Balancer (ALB)
* Provisions an ECS Cluster and Service on Fargate
* Deploys a Dockerized app from ECR to ECS
* Automates image builds and deployments using GitHub Actions

---

## üîß Prerequisites

* AWS Account
* AWS CLI installed and configured
* Docker installed locally
* Terraform installed
* GitHub account

---

## üß± Infrastructure Setup (Terraform)

```bash
cd infra/
terraform init
terraform apply
```

This will:

* Create a VPC, Subnets, IGW, NAT GW, Route Tables
* Set up ECS Cluster, ALB, IAM Roles, Security Groups
* Create an Amazon ECR Repository

### Outputs

Terraform will output:

* `alb_url`: Use this to access your deployed app

---

## üê≥ Push First Image Manually (one-time)

```bash
cd hello-world-app/
aws ecr get-login-password --region us-east-1 | \
  docker login --username AWS --password-stdin <aws_account_id>.dkr.ecr.us-east-1.amazonaws.com

docker build -t hello-world .
docker tag hello-world:latest <your-ecr-url>:latest
docker push <your-ecr-url>:latest
```

---

## üîÅ GitHub Actions CI/CD

### What It Does:

On every push to `main` in the `hello-world-app` folder:

* Builds Docker image
* Pushes to ECR
* Registers a new ECS Task Definition
* Updates the ECS Service to use it

### Required GitHub Secrets:

In your GitHub repo:

```
AWS_ACCESS_KEY_ID
AWS_SECRET_ACCESS_KEY
AWS_REGION (us-east-1)
ECR_REPOSITORY (<your-account-id>.dkr.ecr.<region>.amazonaws.com/hello-world)
ECS_CLUSTER_NAME (hello-world-cluster)
ECS_SERVICE_NAME (hello-world-service)
CONTAINER_NAME (hello-world)
```

### Triggering a Deployment:

```bash
cd hello-world-app/
echo "<!-- updated -->" >> index.html
git add index.html
git commit -m "feat: update hello world text"
git push origin main
```

Check GitHub Actions ‚Üí Your workflow should run and deploy the new image.

---

## üìÑ ECS Task Definition - What‚Äôs Inside?

The task definition is generated by GitHub Actions and includes:

* Your container image (from ECR)
* CPU/memory settings
* Port mappings (usually port 80)
* Execution role ARN like:
  `arn:aws:iam::<account-id>:role/ecsTaskExecutionRole`

## üßπ Teardown

To destroy everything:

```bash
cd infra/
terraform destroy
```

To redeploy:

1. `terraform apply`
2. Rebuild + Push image manually once (only first time)
3. After that, let GitHub Actions handle it

---

## ‚úÖ Summary

| Feature                  | Supported ‚úÖ |
| ------------------------ | ----------- |
| ECS Fargate              | ‚úÖ           |
| ALB with Target Group    | ‚úÖ           |
| Private/Public Subnets   | ‚úÖ           |
| Docker + ECR Integration | ‚úÖ           |
| GitHub Actions CI/CD     | ‚úÖ           |
| Modular Terraform        | ‚úÖ           |

---

Enjoy deploying with Terraform & GitHub Actions! üéâ

!PLEASE NOTICE - THIS IS A PRESENTATION REPO - YOU SHOULD SPLIT THE CONTENTS INTO TWO INDIVIDUAL REPOS!
